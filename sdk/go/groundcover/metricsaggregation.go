// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package groundcover

import (
	"context"
	"reflect"

	"errors"
	"github.com/groundcover-com/pulumi-groundcover/sdk/go/groundcover/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Metrics Aggregation resource. This is a singleton resource that configures metrics aggregation rules.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/groundcover-com/pulumi-groundcover/sdk/go/groundcover"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi/config"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			cfg := config.New(ctx, "")
//			groundcoverApiKey := cfg.Require("groundcoverApiKey")
//			groundcoverBackendId := cfg.Require("groundcoverBackendId")
//			// Example Metrics Aggregation
//			// This resource configures metrics aggregation rules for reducing cardinality
//			// and improving query performance.
//			metricsaggregation, err := groundcover.NewMetricsaggregation(ctx, "metricsaggregation", &groundcover.MetricsaggregationArgs{
//				Value: pulumi.String(`content: |
//	  - ignore_old_samples: true
//	    match: '{__name__=~"http_requests_total"}'
//	    without: [instance, pod]
//	    interval: 60s
//	    outputs: [total_prometheus]
//	  - ignore_old_samples: true
//	    match: '{__name__=~"process_cpu_seconds_total"}'
//	    without: [instance]
//	    interval: 30s
//	    outputs: [total_prometheus]
//
// `),
//
//			})
//			if err != nil {
//				return err
//			}
//			ctx.Export("metricsAggregationUpdatedAt", metricsaggregation.UpdatedAt)
//			return nil
//		})
//	}
//
// ```
type Metricsaggregation struct {
	pulumi.CustomResourceState

	// The last update timestamp of the metrics aggregation configuration.
	UpdatedAt pulumi.StringOutput `pulumi:"updatedAt"`
	// The YAML representation of the metrics aggregation configuration.
	Value pulumi.StringOutput `pulumi:"value"`
}

// NewMetricsaggregation registers a new resource with the given unique name, arguments, and options.
func NewMetricsaggregation(ctx *pulumi.Context,
	name string, args *MetricsaggregationArgs, opts ...pulumi.ResourceOption) (*Metricsaggregation, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.Value == nil {
		return nil, errors.New("invalid value for required argument 'Value'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource Metricsaggregation
	err := ctx.RegisterResource("groundcover:index/metricsaggregation:Metricsaggregation", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetMetricsaggregation gets an existing Metricsaggregation resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetMetricsaggregation(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *MetricsaggregationState, opts ...pulumi.ResourceOption) (*Metricsaggregation, error) {
	var resource Metricsaggregation
	err := ctx.ReadResource("groundcover:index/metricsaggregation:Metricsaggregation", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering Metricsaggregation resources.
type metricsaggregationState struct {
	// The last update timestamp of the metrics aggregation configuration.
	UpdatedAt *string `pulumi:"updatedAt"`
	// The YAML representation of the metrics aggregation configuration.
	Value *string `pulumi:"value"`
}

type MetricsaggregationState struct {
	// The last update timestamp of the metrics aggregation configuration.
	UpdatedAt pulumi.StringPtrInput
	// The YAML representation of the metrics aggregation configuration.
	Value pulumi.StringPtrInput
}

func (MetricsaggregationState) ElementType() reflect.Type {
	return reflect.TypeOf((*metricsaggregationState)(nil)).Elem()
}

type metricsaggregationArgs struct {
	// The YAML representation of the metrics aggregation configuration.
	Value string `pulumi:"value"`
}

// The set of arguments for constructing a Metricsaggregation resource.
type MetricsaggregationArgs struct {
	// The YAML representation of the metrics aggregation configuration.
	Value pulumi.StringInput
}

func (MetricsaggregationArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*metricsaggregationArgs)(nil)).Elem()
}

type MetricsaggregationInput interface {
	pulumi.Input

	ToMetricsaggregationOutput() MetricsaggregationOutput
	ToMetricsaggregationOutputWithContext(ctx context.Context) MetricsaggregationOutput
}

func (*Metricsaggregation) ElementType() reflect.Type {
	return reflect.TypeOf((**Metricsaggregation)(nil)).Elem()
}

func (i *Metricsaggregation) ToMetricsaggregationOutput() MetricsaggregationOutput {
	return i.ToMetricsaggregationOutputWithContext(context.Background())
}

func (i *Metricsaggregation) ToMetricsaggregationOutputWithContext(ctx context.Context) MetricsaggregationOutput {
	return pulumi.ToOutputWithContext(ctx, i).(MetricsaggregationOutput)
}

// MetricsaggregationArrayInput is an input type that accepts MetricsaggregationArray and MetricsaggregationArrayOutput values.
// You can construct a concrete instance of `MetricsaggregationArrayInput` via:
//
//	MetricsaggregationArray{ MetricsaggregationArgs{...} }
type MetricsaggregationArrayInput interface {
	pulumi.Input

	ToMetricsaggregationArrayOutput() MetricsaggregationArrayOutput
	ToMetricsaggregationArrayOutputWithContext(context.Context) MetricsaggregationArrayOutput
}

type MetricsaggregationArray []MetricsaggregationInput

func (MetricsaggregationArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Metricsaggregation)(nil)).Elem()
}

func (i MetricsaggregationArray) ToMetricsaggregationArrayOutput() MetricsaggregationArrayOutput {
	return i.ToMetricsaggregationArrayOutputWithContext(context.Background())
}

func (i MetricsaggregationArray) ToMetricsaggregationArrayOutputWithContext(ctx context.Context) MetricsaggregationArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(MetricsaggregationArrayOutput)
}

// MetricsaggregationMapInput is an input type that accepts MetricsaggregationMap and MetricsaggregationMapOutput values.
// You can construct a concrete instance of `MetricsaggregationMapInput` via:
//
//	MetricsaggregationMap{ "key": MetricsaggregationArgs{...} }
type MetricsaggregationMapInput interface {
	pulumi.Input

	ToMetricsaggregationMapOutput() MetricsaggregationMapOutput
	ToMetricsaggregationMapOutputWithContext(context.Context) MetricsaggregationMapOutput
}

type MetricsaggregationMap map[string]MetricsaggregationInput

func (MetricsaggregationMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Metricsaggregation)(nil)).Elem()
}

func (i MetricsaggregationMap) ToMetricsaggregationMapOutput() MetricsaggregationMapOutput {
	return i.ToMetricsaggregationMapOutputWithContext(context.Background())
}

func (i MetricsaggregationMap) ToMetricsaggregationMapOutputWithContext(ctx context.Context) MetricsaggregationMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(MetricsaggregationMapOutput)
}

type MetricsaggregationOutput struct{ *pulumi.OutputState }

func (MetricsaggregationOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**Metricsaggregation)(nil)).Elem()
}

func (o MetricsaggregationOutput) ToMetricsaggregationOutput() MetricsaggregationOutput {
	return o
}

func (o MetricsaggregationOutput) ToMetricsaggregationOutputWithContext(ctx context.Context) MetricsaggregationOutput {
	return o
}

// The last update timestamp of the metrics aggregation configuration.
func (o MetricsaggregationOutput) UpdatedAt() pulumi.StringOutput {
	return o.ApplyT(func(v *Metricsaggregation) pulumi.StringOutput { return v.UpdatedAt }).(pulumi.StringOutput)
}

// The YAML representation of the metrics aggregation configuration.
func (o MetricsaggregationOutput) Value() pulumi.StringOutput {
	return o.ApplyT(func(v *Metricsaggregation) pulumi.StringOutput { return v.Value }).(pulumi.StringOutput)
}

type MetricsaggregationArrayOutput struct{ *pulumi.OutputState }

func (MetricsaggregationArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Metricsaggregation)(nil)).Elem()
}

func (o MetricsaggregationArrayOutput) ToMetricsaggregationArrayOutput() MetricsaggregationArrayOutput {
	return o
}

func (o MetricsaggregationArrayOutput) ToMetricsaggregationArrayOutputWithContext(ctx context.Context) MetricsaggregationArrayOutput {
	return o
}

func (o MetricsaggregationArrayOutput) Index(i pulumi.IntInput) MetricsaggregationOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *Metricsaggregation {
		return vs[0].([]*Metricsaggregation)[vs[1].(int)]
	}).(MetricsaggregationOutput)
}

type MetricsaggregationMapOutput struct{ *pulumi.OutputState }

func (MetricsaggregationMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Metricsaggregation)(nil)).Elem()
}

func (o MetricsaggregationMapOutput) ToMetricsaggregationMapOutput() MetricsaggregationMapOutput {
	return o
}

func (o MetricsaggregationMapOutput) ToMetricsaggregationMapOutputWithContext(ctx context.Context) MetricsaggregationMapOutput {
	return o
}

func (o MetricsaggregationMapOutput) MapIndex(k pulumi.StringInput) MetricsaggregationOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *Metricsaggregation {
		return vs[0].(map[string]*Metricsaggregation)[vs[1].(string)]
	}).(MetricsaggregationOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*MetricsaggregationInput)(nil)).Elem(), &Metricsaggregation{})
	pulumi.RegisterInputType(reflect.TypeOf((*MetricsaggregationArrayInput)(nil)).Elem(), MetricsaggregationArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*MetricsaggregationMapInput)(nil)).Elem(), MetricsaggregationMap{})
	pulumi.RegisterOutputType(MetricsaggregationOutput{})
	pulumi.RegisterOutputType(MetricsaggregationArrayOutput{})
	pulumi.RegisterOutputType(MetricsaggregationMapOutput{})
}
